{% extends 'base.html.twig' %}

{% block title %} Edition d'un produit {% endblock %}

{% block body %}

<h1>Modification du produit #{{ produit.id }} - {{ produit.titre }}</h1>

{% include 'elements/arborescence.html.twig' %}

<div>
    {{ form_start(form) }}
    {{ form_errors(form) }}
    
    {{ form_row(form.titre) }}
	{{ form_row(form.type) }}
	{{ form_row(form.genre) }}
	{{ form_row(form.texte) }}
	{{ form_row(form.texte_2) }}
	{{ form_row(form.tranche_age) }}
	{{ form_row(form.quantite) }}
	{{ form_row(form.date_envoi) }}
	{{ form_row(form.image) }}
    
    <div id="produit_row_etablissement" class="shadow-sm p-3 mb-5 bg-white rounded border">
        {{ form_row(form.produitEtablissements) }}
    </div>
    <div id="produit_row_specialite" class="shadow-sm p-3 mb-5 bg-white rounded border">
        {{ form_row(form.produitSpecialites) }}
    </div>
    
    {{ form_rest(form) }}
    {{ form_end(form) }}
    
</div>
	  
{% endblock %}

{% block javascripts %}

    <script type="text/javascript">
    
    $(document).ready(function() {
        $('#produit_image').change(function() {
    		var file = $(this)[0].files[0].name;
    		$('.custom-file label[for="'+ $(this).attr('id') +'"]').html(file);
    	});

    	{% if produit.produitEtablissements is empty %}
    		$('#produit_row_etablissement').hide();
    	{% endif %}
    	
    	{% if produit.produitSpecialites is empty %}
    		$('#produit_row_specialite').hide();
    	{% endif %}
    });
    </script> 

{% endblock %}